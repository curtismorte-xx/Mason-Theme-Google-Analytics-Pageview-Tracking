<script type="text/javascript">
// Mason Tumblr Theme Index Scripts 1.5 - mikedidthis (http://mikedidthis.co.uk) //
(function(a){a.fn.countPosts=function(){var b=a(this),d=b.children(".post").size(),c=b.find(".next-page").find(".load").attr("href"),f=b.find(".prev-page").find(".load").attr("href"),i=b.find("span.start"),b=b.find("span.end");pageNumber=!c&&!f?"0":c?c:f;var g=pageNumber.match(/[0-9]+/);c?f?(g=parseInt(g-1)-1,c=postsPerPage*g+1):c=1:(g=parseInt(g),c=postsPerPage*g+1);d=c+(d-1);i.text(c);b.text(d)}})(jQuery);
(function(a){a.fn.postPageURL=function(){var b=a(".prev-page .load").attr("href"),d=a(".next-page .load").attr("href"),c=/[0-9]+/,f=a(this).children(".post");try{if(!d&&!b)var i=" ";else{if(d)g=d.replace("/page/","").replace(/\d+/g,""),j=parseInt(d.match(c))-1;else var g=b.replace("/page/","").replace(/\d+/g,""),j=parseInt(b.match(c))+1;i=""+g+"/page/"+j+""}f.each(function(){var b=a(this).attr("id");sessionStorage.setItem(b,i)})}catch(e){e.name.toUpperCase()}}})(jQuery);
(function(a){a.fn.noMorePosts=function(){var b=a(this);b.find(".prev-page").size();b.find(".next-page").size()||a('<div class="pagination end"><p class="details"><span class="icon">g</span>Posts: <strong><span class="start">?</span> - <span class="end">?</span></strong></p><p class="load">'+noMorePostsMessage+"</p></div>").appendTo(b)}})(jQuery);
$(function(){var a=$("#posts"),b=a.height();a.height(b);a.postPageURL();a.noMorePosts();a.countPosts();$(window).load(function(){$(".photoset-grid").photosetGrid();$(".video-wrapper").fitVids();$("a.dsq-comment-count").disqusNumber();$("span.details").updateNumbers();a.isotope({itemSelector:".post, .pagination",layoutMode:"masonry",masonry:{columnWidth:1},animationOptions:{duration:0,easing:"swing",queue:!1},transformsEnabled:!1},function(){$(".post, .pagination").delay(0).fadeTo(0,1);$(".view").not(".photoset-grid li .view").biggerPics()})})});
(function(a){var b=a("#posts");a(".prev-page .load").live("click",function(d){d.preventDefault();var c=a(this),f=c.attr("href"),d=c.offset().top,i=a(window).scrollTop(),g=d-i;c.text("page loading");a("<div/>").load(f+"#posts .post, .prev-page, .next-page",function(){var d=a(this),e=a(this).find(".next-page").children(".details"),i=c.parent(),k=a(this).children(".post");try{k.each(function(){var b=a(this).attr("id");sessionStorage.setItem(b,f)})}catch(l){l.name.toUpperCase()}d.countPosts();a(e).clone().appendTo(i);
var h=d.children().not(".next-page");b.prepend(h).promise().done(function(){disqusUsername&&a("body").disquscommentCount();h.find("span.details").updateNumbers();h.find(".video-wrapper").fitVids();h.find(".audio").each(function(){var b=window.location.href.split(window.location.pathname)[0],c=a(this).closest(".post").attr("id"),d=a(this);a.ajax({url:b+"/api/read/json?id="+c,dataType:"jsonp",timeout:5E4,success:function(a){d.html('<div style="background-color:white;height:30px" class="audio_player">'+
a.posts[0]["audio-player"]+"</div>")}})})}).promise().done(function(){b.imagesLoaded(function(){h.find(".photoset-grid").photosetGrid();b.isotope("reloadItems").isotope({sortBy:"original-order"},function(){c.text("page loaded").removeAttr("href").addClass("loaded");a.scrollTo(c,0,{offset:-g});h.delay(0).fadeTo(0,1);h.find(".view").not(".photoset-grid li .view").biggerPics();setTimeout(function(){h.find("a.dsq-comment-count").disqusNumber();h.find(".disqus").children("span.details").updateNumbers()},
1E3)})})})})})})(jQuery);
(function(a){var b=a("#posts");a(".next-page .load").live("click",function(d){d.preventDefault();var c=a(this),f=c.attr("href");c.text("page loading");a("<div/>").load(f+"#posts .post, .next-page, .prev-page",function(){var d=a(this),g=a(this).children(".post");try{g.each(function(){var b=a(this).attr("id");sessionStorage.setItem(b,f)})}catch(j){j.name.toUpperCase()}d.noMorePosts();d.countPosts();var e=a(this).children().not(".prev-page");b.append(e).promise().done(function(){disqusUsername&&a("body").disquscommentCount();
e.find("span.details").updateNumbers();e.find(".video-wrapper").fitVids();e.find(".audio").each(function(){var b=window.location.href.split(window.location.pathname)[0],c=a(this).closest(".post").attr("id"),d=a(this);a.ajax({url:b+"/api/read/json?id="+c,dataType:"jsonp",timeout:5E4,success:function(a){d.html('<div style="background-color:white;height:30px" class="audio_player">'+a.posts[0]["audio-player"]+"</div>")}})})}).promise().done(function(){b.imagesLoaded(function(){e.find(".photoset-grid").photosetGrid();
a(this).isotope("appended",a(e),function(){removeLoadNextPageButton?(c.parent().remove(),b.isotope("reLayout")):c.text("page loaded").removeAttr("href").addClass("loaded");e.delay(0).fadeTo(0,1);e.find(".view").not(".photoset-grid li .view").biggerPics();setTimeout(function(){e.find("a.dsq-comment-count").disqusNumber();e.find(".disqus").children("span.details").updateNumbers();c.on("click")},1E3)})})})})})})(jQuery);
(function(a){if(!a("html").is(".lt-ie9")){var b;a(window).scroll(function(){b=!0});setInterval(function(){if(b){var refc=window.location.pathname;try{var d=a(".post:in-viewport").first().attr("id"),c=sessionStorage.getItem(d);history.replaceState&&c&&(new_url=c,history.replaceState("","",new_url));if((refc != new_url) && (new_url != '/page/1')){_gaq.push(['_trackPageview', new_url]);}}catch(f){f.name.toUpperCase();}b=!1}},250)}})(jQuery);
</script>